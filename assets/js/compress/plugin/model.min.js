JSB.extendPlugin(JSB.cls("jsborn.plugin.model",{depends:["jsborn.core.model"],getPrototype:function(){return{getModelData:this._get_model_data,getModel:this._get_model,setModel:this._set_model,delModel:this._del_model,addModel:this._add_model}},initialize:function(){var a=this;a.PLUGIN_MODEL={model:[]};a.addListener("destroy",function(){for(var b=0;b<a.PLUGIN_MODEL.model.length;b++)a.PLUGIN_MODEL.model[b].destroy()})},_get_model_data:function(a){return this.PLUGIN_MODEL.model},_get_model:function(a){for(var b=
0;b<this.PLUGIN_MODEL.model.length;b++){var c=this.PLUGIN_MODEL.model[b];if(c.getOption().key==a)return c}return!1},_set_model:function(a,b){var c=this.getModel(a);if(!c)return!1;c.change(b)},_add_model:function(a,b){var c=JSB.create("jsborn.plugin.model.node",{key:a,data:jQuery.extend(!0,{},b)});this.PLUGIN_MODEL.model.push(c);return c},_del_model:function(a){for(var b=0;b<this.PLUGIN_MODEL.model.length;b++){var c=this.PLUGIN_MODEL.model[b];if(c.getOption().key==a)return this.PLUGIN_MODEL.model.splice(b,
1),c}return!1}}));
JSB.cls("jsborn.plugin.model.node",{getData:function(){return jQuery.extend(!0,{},this._obj_data.data)},setData:function(a){this._obj_data.data=a;return jQuery.extend(!0,{},this._obj_data.data)},setOption:function(a){return this._obj_data=a},getOption:function(){return this._obj_data},change:function(a){for(var b=0;b<this._ary_listeners.length;b++){var c=this._ary_listeners[b],e=c.scope?c.scope:this,d=JSB.core.model.getObjtDiff(this.getData(),a,c.type);jQuery.isEmptyObject(d)||c.func.apply(e,[d])}this.setData(a)},
initialize:function(a){this.setOption(a);this._ary_listeners=[];this.addListener("destroy",function(){})},listener:function(a,b,c){this._ary_listeners.push({type:a,func:b,scope:c});return c}});