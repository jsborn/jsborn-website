JSB.extendPlugin(JSB.cls("jsborn.plugin.controller",{depends:["jsborn.core.model","jsborn.plugin.model"],getPrototype:function(){return{registerEvent:this._auto_bind,registerClass:this._auto_class,registerData:this._auto_data,setRoot:this._set_root,getRoot:this._get_root,select:this._select}},initialize:function(){var a=this;a.PLUGIN_CONTROLLER={str_root:"body",tag:["INPUT","SELECT"],nodes:[]};a.addListener("destroy",function(){for(var c=0;c<a.PLUGIN_CONTROLLER.nodes.length;c++)a.PLUGIN_CONTROLLER.nodes[c].destroy()})},
_auto_data:function(){var a=this;this.select().find("[jsb-data]").filter(function(){return!$(this).parentsUntil(a.select(),"[jsb-cls]").length}).each(function(c,g){var b=jQuery(this),e=b.attr("jsb-data"),f=b.attr("jsb-data-event"),d=e.split(":"),e=d[0],k=d[1],h,d=a.PLUGIN_CONTROLLER;jQuery.isEmptyObject(f)&&(f="modify");h=-1==jQuery.inArray(b[0].tagName,d.tag)?"html":"val";a.getModel(e).listener(f,function(a){a=JSB.core.model.getObjKey(a,k);b[h](a)})})},_auto_class:function(){var a=this;this.select().find("[jsb-cls]").filter(function(){return!$(this).parentsUntil(a.select(),
"[jsb-cls]").length}).each(function(c,g){var b=jQuery(this).attr("jsb-cls"),b=JSB.create(b);a.PLUGIN_CONTROLLER.nodes.push(b);jQuery(a).triggerHandler("cls.controller.create",[b,g])})},_auto_bind:function(a){var c=this;this.select().find("[jsb-event]").filter(function(){return!$(this).parentsUntil(c.select(),"[jsb-cls]").length}).each(function(a,b){var e=jQuery(this).attr("jsb-event").split(":"),f=e[0],d=c[e[1]];jQuery(this)[JSB.event.off](f)[JSB.event.on](f,{scope:c},function(b){jQuery.isFunction(d)?
d.apply(this,arguments):console.log("DOM IS NOT DEFINE EVENT CallBack",a)})})},_select:function(){return jQuery(this.PLUGIN_CONTROLLER.str_root)},_set_root:function(a){this.PLUGIN_CONTROLLER.str_root=a;return this.PLUGIN_CONTROLLER.str_root},_get_root:function(){return this.PLUGIN_CONTROLLER.str_root}}));