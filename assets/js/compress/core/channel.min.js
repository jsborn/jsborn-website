JSB.extendCore("channel",JSB.cls("jsborn.core.channel",{addChannel:function(a){if(this.getChannel(a))return!1;this._obj_channel[a]={member:[]};return!0},delChannel:function(a){if(!this.getChannel(a))return!1;delete this._obj_channel[a];return!0},join:function(a,b,c){this.addChannel(a);this.getChannel(a).member.push(b);jQuery(this)[JSB.event.on](a,{scope:b},function(a){c.apply(b,arguments)})},getChannel:function(a){return this._obj_channel[a]},getChannelData:function(){return this._obj_channel},send:function(a,
b){if(!this.getChannel(a))return!1;jQuery(this).triggerHandler(a,b)},leave:function(a,b){var c=jQuery._data(this,"events");if(!c[a])return!1;for(var d=0;d<c[a].length;d++)if(c[a][d].data.scope==b)return c[a].splice(d,1),!0;return!1},initialize:function(){var a=this;a._obj_channel={};JSB.addListener("destroy",function(b,c){for(x in a._obj_channel)a.leave(x,c)})}}));